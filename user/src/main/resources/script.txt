sudo docker run -d -p 49161:1521 oracleinanutshell/oracle-xe-11g

CREATE USER vaccine IDENTIFIED BY teste123;
GRANT CONNECT TO vaccine;
GRANT UNLIMITED TABLESPACE TO vaccine;
GRANT create session TO vaccine;
GRANT create table TO vaccine;
GRANT create view TO vaccine;
GRANT create any trigger TO vaccine;
GRANT create any procedure TO vaccine;
GRANT create sequence TO vaccine;
GRANT create synonym TO vaccine;

-- Table: VACCINE
CREATE TABLE vaccine.VACCINE (
    vaccine_id_pk NUMBER(15) NOT NULL,
    vaccine_name varchar2(200)  NOT NULL,
    tip varchar2(200),
    date_create DATE  NOT NULL,
    CONSTRAINT vaccine_name_unique UNIQUE (vaccine_name),
    CONSTRAINT vaccine_pk PRIMARY KEY  (vaccine_id_pk)
);

CREATE SEQUENCE vaccine.vacc_seq START WITH 1;

-- Table: CAMPAIGN
CREATE TABLE vaccine.CAMPAIGN (
    campaign_id_pk NUMBER(15) NOT NULL ,
    status NUMBER(2)  NOT NULL,
    campaign_name varchar2(200) NOT NULL,
    date_create DATE  NOT NULL,
    date_end DATE  NOT NULL,
    date_begin DATE  NOT NULL,
    CONSTRAINT campaign_name UNIQUE (campaign_name),
    CONSTRAINT campaign_id_pk PRIMARY KEY  (campaign_id_pk)
);

CREATE SEQUENCE vaccine.cam_seq START WITH 1;

-- Table: VACCINE_CAMPAIGN
CREATE TABLE vaccine.VACCINE_CAMPAIGN (
    campaign_id_pk NUMBER(15)  NOT NULL,
    vaccine_id_pk NUMBER(15)  NOT NULL,
    date_create TIMESTAMP  NOT NULL,
    number_vaccines NUMBER(15) NOT NULL,
    CONSTRAINT campaign_id_pk_vaccine_id PRIMARY KEY  (campaign_id_pk,vaccine_id_pk)
);

-- Table: USER
CREATE TABLE vaccine.USERS (
    user_id_pk NUMBER(15)  NOT NULL ,
    user_name varchar2(200) NOT NULL,
    employee_pk NUMBER(15),
    date_create DATE  NOT NULL,
    CONSTRAINT user_id_pk PRIMARY KEY  (user_id_pk)
);

CREATE TABLE USUARIOS.TASKS (
    ID INT PRIMARY KEY AUTO_INCREMENT,
    NOME VARCHAR(255),
    ID_USUARIO VARCHAR(255),
    ID_CATEGORIA INT,
    FOREIGN KEY(ID_USUARIO) REFERENCES USUARIOS.USUARIOS(ID),
    FOREIGN KEY(ID_CATEGORIA) REFERENCES USUARIOS.CATEGORIA(ID)
);

CREATE TABLE USUARIOS.CATEGORIA (
    ID INT PRIMARY KEY AUTO_INCREMENT,
    NOME VARCHAR(255),
    TIPO VARCHAR(255)
);


CREATE SEQUENCE vaccine.users_seq START WITH 1;


-- Table: CAMPAIGN_VACCINE_USER
CREATE TABLE vaccine.CAMPAIGN_VACCINE_USER (
    campaign_id_pk NUMBER(15)  NOT NULL ,
    vaccine_id_pk NUMBER(15)  NOT NULL,
    user_id_pk NUMBER(15)  NOT NULL,
    date_create DATE  NOT NULL,
    CONSTRAINT campign_vac_usr PRIMARY KEY  (campaign_id_pk,vaccine_id_pk,user_id_pk)
);

-- Table: CAMPAIGN_VACCINE_USER
CREATE TABLE vaccine.CAMPAIGN_VACCINE_USER_WAITLIST (
    campaign_id_pk NUMBER(15)  NOT NULL,
    vaccine_id_pk NUMBER(15)  NOT NULL,
    user_id_pk NUMBER(15)  NOT NULL,
    date_create DATE  NOT NULL,
    CONSTRAINT campign_vac_usr_w PRIMARY KEY  (campaign_id_pk,vaccine_id_pk,user_id_pk)
);



ALTER TABLE vaccine.VACCINE_CAMPAIGN ADD CONSTRAINT FK_1_VAC_CAM
    FOREIGN KEY (vaccine_id_pk)
    REFERENCES vaccine.VACCINE (vaccine_id_pk);


ALTER TABLE vaccine.VACCINE_CAMPAIGN ADD CONSTRAINT FK_2_VAC_CAM
    FOREIGN KEY (campaign_id_pk)
    REFERENCES vaccine.CAMPAIGN (campaign_id_pk);


ALTER TABLE vaccine.CAMPAIGN_VACCINE_USER ADD CONSTRAINT FK_1_COM_VC
    FOREIGN KEY (vaccine_id_pk)
    REFERENCES vaccine.VACCINE (vaccine_id_pk);


ALTER TABLE vaccine.CAMPAIGN_VACCINE_USER ADD CONSTRAINT FK_2_COM_VC
    FOREIGN KEY (campaign_id_pk)
    REFERENCES vaccine.CAMPAIGN (campaign_id_pk);


ALTER TABLE vaccine.CAMPAIGN_VACCINE_USER ADD CONSTRAINT FK_3_COM_VC
    FOREIGN KEY (user_id_pk)
    REFERENCES vaccine.USERS (user_id_pk);

----

ALTER TABLE vaccine.CAMPAIGN_VACCINE_USER_WAITLIST ADD CONSTRAINT FK_1_COM_W
    FOREIGN KEY (vaccine_id_pk)
    REFERENCES vaccine.VACCINE (vaccine_id_pk);


ALTER TABLE vaccine.CAMPAIGN_VACCINE_USER_WAITLIST ADD CONSTRAINT FK_2_COM_W
    FOREIGN KEY (campaign_id_pk)
    REFERENCES vaccine.CAMPAIGN (campaign_id_pk);


ALTER TABLE vaccine.CAMPAIGN_VACCINE_USER_WAITLIST ADD CONSTRAINT FK_3_COM_W
    FOREIGN KEY (user_id_pk)
    REFERENCES vaccine.USERS (user_id_pk);



////////////////////////////////////////////

INSERT into vaccine.VACCINE values (vaccine.vacc_seq.NEXTVAL,'Gripe 2021 acima de 3 anos','Vacina Gripe indicada para pessoas com mais de 3 anos',to_date('23/02/2021','DD/MM/YYYY'));
INSERT into vaccine.VACCINE values (vaccine.vacc_seq.NEXTVAL,'Gripe 2021 abaixo de 3 anos','Vacina Gripe indicada para pessoas com menos de anos',to_date('23/02/2021','DD/MM/YYYY'));
INSERT into vaccine.VACCINE values (vaccine.vacc_seq.NEXTVAL,'Coronavac 05/2021','Vacina Coronavac para todas faixas etárias',to_date('23/02/2021','DD/MM/YYYY'));

------
INSERT into vaccine.CAMPAIGN values (vaccine.cam_seq.NEXTVAL,1,'Campanha Vacinação Gripe 2021',to_date('10/01/2021','DD/MM/YYYY'),to_date('20/01/2021','DD/MM/YYYY'),to_date('20/05/2021','DD/MM/YYYY'));
INSERT into vaccine.CAMPAIGN values (vaccine.cam_seq.NEXTVAL,1,'Campanha Vacinação Covid 2021',to_date('15/05/2021','DD/MM/YYYY'),to_date('20/06/2021','DD/MM/YYYY'),to_date('20/08/2021','DD/MM/YYYY'));

---
INSERT into vaccine.VACCINE_CAMPAIGN values (1,1,to_date('10/01/2021','DD/MM/YYYY'), 50);
INSERT into vaccine.VACCINE_CAMPAIGN values (1,2,to_date('10/01/2021','DD/MM/YYYY'), 50);

--
INSERT into vaccine.USERS values (vaccine.users_seq.NEXTVAL,'laural',NULL,to_date('23/02/2021','DD/MM/YYYY'));
INSERT into vaccine.USERS values (vaccine.users_seq.NEXTVAL,'antoniod',1,to_date('23/02/2021','DD/MM/YYYY'));
INSERT into vaccine.USERS values (vaccine.users_seq.NEXTVAL,'joaos',NULL,to_date('23/02/2021','DD/MM/YYYY'));

--
INSERT into vaccine.CAMPAIGN_VACCINE_USER values (1,1,1,to_date('23/02/2021','DD/MM/YYYY'));
INSERT into vaccine.CAMPAIGN_VACCINE_USER values (1,2,2,to_date('23/02/2021','DD/MM/YYYY'));

--
INSERT into vaccine.CAMPAIGN_VACCINE_USER_WAITLIST values (1,2,3,to_date('23/02/2021','DD/MM/YYYY'));



 String sql = "CREATE TABLE USUARIOS.USUARIOS(" +
                    "ID VARCHAR2(255), " +
                    "NAME VARCHAR(255), " +
                    "EMAIL VARCHAR(255), " +
                    "PASSWORD VARCHAR(255))";

                     String sqlCategory = "CREATE TABLE USUARIOS.CATEGORIA(" +
                                        "ID INTEGER PRIMARY KEY AUTO_INCREMENT, NOME VARCHAR(255), TIPO VARCHAR(255)"+")";